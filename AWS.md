## コンピューティング

EC2

1.ルートデバイスボリューム　→ /dev/sda1

2.インスタンスストアボリューム　→ /dev/sdb~e 

3.EBSボリューム → /dev/sdf~p 1~6 

4.インスタンスメタデータとユーザーデータ

| メタデータ                                           | ユーザーデータ                |
| ---------------------------------------------------- | ----------------------------- |
| EC2自身に関するデータ（ホスト名、インスタンスIDなど) | os起動時のスクリプト          |
| http://169.254.169.254/latest/meta-data/             | EC2初回起動時に実行したい処理 |

5.ブレイスメントグループ

ネットワークパフォーマンスの向上や物理サーバー障害時に影響範囲を限定させるため、インスタンスをグループ化する

5.1 グルーピング戦略 → 物理ラック単位でインスタンスを配置する。ハードウェア障害による影響を隔離。

5.2 クラスター →  インスタンス群を高パイセクションバンド幅セグメントに配置

5.3 パーテンション → 各パーティションにはラックが対応、アプリケーション内ハードウェア障害による影響を隔離

6 AMI Amazon Manage Image

6.1テンプレートによって複数EC2を作られる

6.2 どのユーザが起動できる設定できる→ 起動許可

6.3 起動時にアタッチするEBSが設定できる　→ Blocak Device Mapping

Fully baked AMI  OS , App ミドルウェア全部を一つイメージにする。　メンテナンスが面倒になる　小規模システムに向け

Hybrid AMI　osと一部ミドルウェアをイメージにする。他は設定ファイルやAgantで取得する

JeOS AMI 　OSだけをイメージにする。他は設定ファイルやAgantで取得する　大規模システムに向け

起動時間が長くなる

6.4 Amazon EBS-Backed AMI 

6.5 Amazon Instance Store-Backed AMI







## ネットワーク

1.インターネットゲートウェイ

(アウトバウンド(awsから外へ)、インバウンド(外からawsへ)

2.カスタムテーブル（サブネット）

3.セキュリティルール（EC2）

|          | セキュリティルール                                           | ネットワークACL                                              |
| -------- | :----------------------------------------------------------- | ------------------------------------------------------------ |
| ルール   | 許可                                                         | 許可、拒否                                                   |
| ステート | ステートフル                                                 | ステートレス                                                 |
| 制御範囲 | サブネット(サブネット内のすべてリソースに影響しますが、E2インスタンス間の通信を制御できない | EC2インス                                                    |
| 設定     | ポート、CIDR                                                 | ポート、CIDR、セキュリティグループID (IPアドレスが常に変動しているので、IDを設定したら運用しやすいです) |

4 ネットワークACL（サブネット）

5.Elastic IP

6.ENI 

 6.1 セキュリティグループ

Nat gateway

7.リージョンサービス

VPC以外インターネットに接続する必要なサービスという

8.エントポイント

gateway型　→ ルートテーブルの設定によりすぐ使えるタイプ　S3 DynamoDB

interface型（private link）　→ 実体はENI セキュリテーグループをアタッチして使用

9.グローバルサービス

リージョン外サービスという

10カスタマーゲートウェイ(on-premises側の設定)

11 AWS Direct Connect

専有ネットワークサービス、インターネットを経由しなくてもデータのやりとり

通信の帯域が保証＆セキュリティ的に安全

12 Direct Connect 仮想インターフェース

12.1 private vpc内部にアクセスできるようになる

12.2 public リージョン内のサービスにアクセスできるようになる

12.3 transit → Direct Connect gateway　→ 　transit gateway → 複数VPCにアクセスする

Direct Connect gateway　→ 複数VPCにアクセスすることができる　→　同一アカウントが必要

13 virtual private gateway

Direct Connect gateway や VPNはVPCに繋ぐするとき必要なもの

14 vpcピアリング

他VPCと繋ぐことができる

　



## データベース

### RDS

1.暗号化(用実践)

2.マルチAZ→可用性向上できますが読み取り性能向上できない

3.リードレプリカの読み取りできる

4.DB処理 OLTP

シーケンシャルアクセス →　単一または少数レコードの書き込み　多数のユーザーから

5.DB処理 OLAP

ランダムアクセス → 　大量レコードの一括書き込みなど複雑な処理　限定ユーザーから

### Aurora 　

1.リードレプリカ　異なるリージョン　→　可用性向上　→　SLA

2.64Tibまで提供

3.レプリカは100ミリ秒未満提供できる→　Mysqlは100ミリ秒ができない場合があります。　→  Oracle MicrosoftSQL Server が　サポートしてないでです。



## ストレージ

#### EBS　　

1.ストレージタイプ（用実践）　

2.ライフサイクルポリシーよりデータ移行できない

3.Glacierへのデータ移行ができない

4EC2にアタッチスするストレージ 　IOPS　→　１秒間　i/oの回数

4.1.汎用SSD　ディフォルト 開発テスト環境

4.2.IOPS SSD　高いがぷフォーマンスが優秀なSSD　高性能DBへ接続時に利用

4.3 io2 provisioned IOPS 

4.4.スループットHDD　ワークロードに向け低コストHDD　ビックデータ　ログ

4.5.Cold HDD 一番安い

5 スナップショット

5.1 EBSをバックアップとして取得したファイル

5.2 S3に保存される

5.3 スナップショット自体をEC2にアタッチすることができない

5.4 増分バックアップ方式

5.5 AZサービス

6 AZ自動冗長化される

7 RAIDを作成するとき、RAID5,6を使用すると、IOPSの一部がパリティ書き込みによって消費される

8 



### インスタンストア

EC2インスタンスに内蔵されているローカルストレージ

EC2の一時的なデータが保存され、EC2の停止、終了とともにクリアされる

無料で使用可能 

### StorageGateway  

1.iSCSiデバイス

### S3

1.RRSは冗長性が最も低いストレージで利用頻度が低いファイルに向け、耐久性も99.99% 安価

2.99.99%可用性　99.999999999%耐久性 → 可用性はシステム稼働し続けることを保証する　耐久性はデータを失わないことを保証する

3.最大サイズは5テラバイト

4.データ整合性モデル　→ 3つデータセンターにデータを同期するため以下の整合性モデルとなります。

4.1書き込み後の読み込み整合性　新しいファイルをアップロード時、書き込み後にすぐ読み込みを行わっても問題がない

4.2結果整合性　既存ファイルを上書き・削除した後に読み込むを行わっても問題がない

5.マルチパートアップロード

## 負荷分散

#### ELB

### Auto Scaling  

1.スケーリングポリシー 

2.ピークロード何？]

3.AutoScalingグループ　→　EC2インスタンス起動設定に指定する　→　設定後に変更できないため、更新時に新しく起動設定を作るのは必要

### SQS

1.ワーカープロセス何？

## 自動構築

### OpsWorks Stacks

1.自のサーバの設定構成を自動化に（インスタンス管理）

### CloudFormation  　

1.土台を作成する　（自由度が高い）

2.OSの選択

### Elastic Beanstalk 

1.インフラよりアプリケーション展開と管理を自動化する

## 権限周り

### IAM

1.IAMポリシー　→ ユーザーに適切なレベルのAPIに対するアクセス許可を与える

2.STS何?

3.AWS config何？　→　アクセス権限を付与することができない

## オンプレミスからAWS

1.仮想マシン(VM)からAWSに移行 → VM Import/Export

## 監視、ログ

### cloudwatch 

アクションを監視できる



## その他

1.障害の場合、AWSへ連絡してからの応答時間は1時間

2.Amazon SWF　→　Amazon Simple Workflow(マネージド型のワークフローサービス) 

2.1 スマホの画像をS3へアップロード

2.2 リサイズ

2.3 メールで仲間へ送信



